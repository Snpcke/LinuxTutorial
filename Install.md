# 安装

## 开始安装

**_请注意，在安装时最好保持网络连接良好，若无网请尽量不要安装_**

**_请注意，在安装时最好保持网络连接良好，若无网请尽量不要安装_**

**_请注意，在安装时最好保持网络连接良好，若无网请尽量不要安装_**

后面我们会解释为什么会有这种要求

---

回到 Ubuntu 桌面，点击左上角安装

![点击安装](https://ws1.sinaimg.cn/large/005TI6pRgy1fsljbfsbt6g31ha0q2wta.jpg)

在右侧选择语言，若您预先需选择过语言，可以不用再选，选好语言后继续

接下来选择键盘布局，一般来说不需要做调整，继续

![键盘布局](https://ws1.sinaimg.cn/large/005TI6pRgy1fsljeib1b8j30s80imacp.jpg)

接下来选择要安装的应用

![应用选择](https://ws1.sinaimg.cn/large/005TI6pRgy1fslji0xwuzj30rs0i80vm.jpg)

由于此处我们是作为正常使用的开发机器使用，因此选择 **正常安装**

**其他选项** 中

- 若您的 **网络条件好** 请勾选第一项，**_安装 Ubuntu 时下载更新_**

  当然不勾选也不会怎么样，在安装结束后依然可以更新

- **一般情况下，会勾选第二项。这样可以提高在使用多媒体时的体验**

  此处主要安装一些主流的音视频解码器，以及部分驱动(?)，**最好保持网络连接安装**，若不安装，将可能导致如 flash 无法播放等情况

  当然，若您知道这里会安装些什么，也可以等系统安装完毕后手动安装

---

接下来进入核心步骤，调整磁盘

- **清除整个磁盘安装 Ubuntu**，若您对系统可恢复性要求不高，且您的电脑 **只安装 Linux**，您可以选择第一项

- **加密 Ubuntu 以提高安全性**，若您有特殊的安全性需求，请选择第二项，此处不演示

- **在 Ubuntu 新安装中使用 LVM**，关于第三个选项，请看后方专题：[LVM——逻辑卷管理工具](#empty)

一般情况下，安装系统不会简单粗暴地清空整个磁盘，因此我们一般选择 **其他选项**

此处会着重讲解使用该方式进行分区，但是首先，我们需要一些前置知识

下面我们将讲解分区相关知识

![分区](https://ws1.sinaimg.cn/large/005TI6pRgy1fsljr4u3rej30pn0ictbb.jpg)

---

## 分区简介

> 简单来看
>
> Linux 分区可以这样看
>
> / 分区 =========== Windows 的 C 盘
>
> /home 分区 ======= Windows 的 D 盘
>
> swap 分区 ======== Windows 的虚拟内存

与 Windows 一样，良好的分区习惯能极大程度地提升 Linux 的使用体验

比如：

- 在存在固态硬盘的情况下，合理分区能秒开系统
- 能更好地利用硬盘资源，甚至可以动态增添硬盘
- Linux 出错时，能增加数据被抢救保留的机率（操作不当还是很容易崩盘的）

更重要的一点是：

**_合理的分区，可以保证当前系统与新系统的共存，即安装双系统_**

但这里我们不涉及双系统的安装，因为在双系统安装的过程当中会出现一些不可忽略的问题，如：

- **引导方式差异：** 现存的主流引导方式有 UEFI 和 Legacy BIOS，不同的引导方式安装流程会不相同
- **分区表差异：** 主流分区表有 **MBR 包含的分区表** 和 **GPT** 两种，新机器多数使用的是 UEFI + GPT 配置，某些 Ghost 安装的 Windows 系统会对原有的 GPT 分区表修改为 MBR

---

## 文件系统

文件系统代表的是操作系统整理组织文件的方式，优秀的文件系统能够极大程度地提高磁盘的利用率，并且能在发生错误的情况下最大限度地保留和恢复数据，是计算机维护人员的好帮手和好朋友

由于大多数 Windows 用户都是使用的家用 Windows，所以很难用到或见到特殊文件系统，而 Windows Server 列外，因此有必要了解一些服务器常用的文件系统

而文件系统的选择一直是一个复杂的问题，不同的需求有不同的选择

Linux 支持的文件系统较多，以下提及一些常用的 Linux 文件系统，具体区别各位可自行了解

- ext
  - ext2
  - ext3
  - ext4
- xfs
- btrfs

[文件系统比较](https://linux.cn/article-7083-1.html)

按照文章的说法

推荐程度是

> xfs > etx4 > btrfs

### 结论

> 如果您不确定您的发行版是否支持某种文件系统，请直接使用 etx4
>
> 一般情况下推荐使用 xfs，因为目前主流发行版对该文件系统支持均较好，而且现行的主流内核均支持 xfs 文件系统，出问题了抢救起来也比较方便

确定好文件系统之后，我们可以开始确定分区的方式

## 分区方式

Windows ，将 **磁盘按数字编号** ，分区时分成多块逻辑磁盘，**分区按大写英语字母编号**来作为逻辑磁盘的盘符来代表一个分区

如：将 物理磁盘 0 分为 C, D, E, F 4 个分区，并且直接可以通过 C, D, E, F 作为盘符标识分区

---

Linux 同样对磁盘进行编号，按照 sdx (sda, sdb, sdc, sdd, sde) 这样的顺序使用小写字母依次编号

当分区完毕时 Linux 使用数字对分区进行编号，如在 **sda 磁盘** 上分区两个，则会有

- sda1
- sda2

两个分区

---

Linux 和 Windows 的差别之一是，Linux 将所有的资源均看作文件，包括 CPU, GPU, 硬盘等

Linux 会将整个系统资源视目录结构

> runoob 菜鸟教程有关于 [Linux 目录结构](http://www.runoob.com/linux/linux-system-boot.html) 的介绍，同时也有关于系统安装的一些知识，可以参考

目录想要储存数据或文件，必须要有硬盘空间

当某个目录使用某个硬盘空间时，则称之为 **这个分区挂载在了一个目录上**

而最顶层的根目录，包含了一些最关键的一些系统资源，如内核程序，引导程序等，这些资源都需要硬盘空间存储

因此，最起码 **根目录一定挂载一个分区**

从根目录开始，每一个目录都有可能是一个分区，或者有可能使用了一个分区

**_若这些目录不额外挂载分区，它们将与根目录共享分区_**

即所有的系统文件都存放在根分区内

**_就好像所有文件全部存放在 C 盘一样_**

**_所以我们会为一些变动频繁，或者是至关重要的目录单独分区_**

---

那么，根据上述原则，我们一般会对以下目录进行分区和挂载

- /

根目录是最为重要的目录，它将会存放整个系统的核心程序，诸如内核、系统配置、基础程序等等，所以一般单独挂载分区，而且，前面也提到了，根目录必须挂载分区

- /boot

/boot 目录是存放引导程序和操作系统内核的目录，若您的引导方式是 UEFI 那么该分区至关重要，若您的引导方式是 Legacy BIOS，那么并不需要单独分出该分区

**_若您使用较新设备，且设备支持并设置好了以 UEFI 引导，请务必单独分出该分区_**

- /home

/home 目录，又称之为家目录，所有用户的 home 目录都会被存放于此，一般被用于存放各个用户私有的数据，且各类第三方软件也一般被用户自行安装在其各自的 home 目录下

**_为了在系统崩溃时保留用户数据，一般会单独分区_**

- /var

/var 目录，一般用于存放频繁变动的数据，比如数据库（大多数数据库软件的数据库文件默认会存放在此），或者是一些全局资源，如 UNIX socket 等

**_为了在系统崩溃时保留这些数据，我们一般也会对它进行单独分区_**

- swap

swap，交换分区，相当于 Windows 中的虚拟内存，当内存不够时，内存中部分数据会被存入交换分区，以腾出内存空间

并且交换分区还提供了休眠这一功能，在休眠时，系统会将内存状态全部存入交换分区，然后断开电源，以达到省电的目的

若您需要休眠功能，请分出该分区，并且大小应当和内存等大，或稍大于内存

若您不需要该功能，请审视自身内存大小，一般建议是当内存小于 2 G 时有必要分出该分区，
大于等于 4 G 时，该分区意义不大

好了，前置知识普及完毕，现在开始进行操作

---

## 操作

我们从上到下进行讲解

![分区操作](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm29o8ogxj30or0nzmyx.jpg)

顶部导航条，是用来展示分区分布的，由于虚拟机默认没有任何分区，所以没有任何内容

![导航条](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm2ik2eebj30nv01j0si.jpg)

中间的表格，直观地列出了所有分区的详细信息

![表格](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm2k7ef4lj30n00crt94.jpg)

下方按钮，对分区进行操作

![按钮](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm2ly0g3ej30n801ajrb.jpg)

最下方，选择引导程序的安装位置

![引导](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm2nnc4slj30mw024glo.jpg)

> 现代计算机系统的启动流程依然依赖引导程序
>
> **_即在开机后会通过一个程序来初始化计算机环境，并运行系统内核_**
>
> 也就是说，一个系统的启动，必然离不开引导程序
>
> 引导程序除了可以引导系统的启动之外，还可以列出当前计算机已安装的系统，供用户选择启动
>
> **_当我们看到需要选择启动的系统时，其实是引导程序功能的一部分_**
>
> ![选择系统](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm2xhegfzj30zk0qognc.jpg)
>
> 比如这就是典型情况
>
> - Windows 的引导程序是 Windows Boot Manager
>
> - Linux 的引导程序比较常见的是 grub
>
> 此处其实相当重要，但是由于我们不涉及双系统的安装，**所以不需要特意强调引导程序的安装位置**

---

接下来进行分区

此时可以看到下方 + / - 按钮处于灰色状态

![灰色按钮](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm3cb1uc2j30mq0j4mzu.jpg)

这是因为 **虚拟机没有默认的分区表**

**_若您不是全新设备或虚拟机，请不要进行接下来的操作_**

**_若您不是全新设备或虚拟机，请不要进行接下来的操作_**

**_若您不是全新设备或虚拟机，请不要进行接下来的操作_**

我们新建分区表

![新建分区表](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm3fh3kd9g314p0odqbk.jpg)

选择空闲分区

![空闲分区](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm3hamuxwj30ns02wmx9.jpg)

这个时候底部按钮就可以操作了

![可操作](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm3i2utahj30oe02dt8s.jpg)

点击加号，出现分区窗口

![分区窗口](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm3j7juftj30aa0aldgq.jpg)

- **大小：** 分区大小，单位为 MB
- **新分区的类型：** 若没有强迫症，则不需要关注该选项

主分区和拓展分区的划分只有在使用 MBR 分区表才有必要注意，所以请关注您的分区表类型

我们假设您使用 GPT 分区表，并以 UEFI 方法引导

- **新分区的位置：** 规定新分区创建在剩余空间的头部还是尾部
- **用于：** 文件系统类型，若不清楚，请倒回前面看文件系统部分
- **挂载点：** 该分区用于挂载哪个文件夹，若不清楚，请倒回前面看分区部分

---

我们先分出 / 目录（根目录）

文件系统为 xfs

大小原则上为 20 GB 以上，但由于分配给虚拟机空间不足，因此我们只分 10 GB

![根分区](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm7np4cgzg30eg0j57a3.jpg)

此时您应该发现我们切换了 **分区类型** 为主分区，原来是逻辑分区，看来本虚拟机似乎默认被假设为了 MBR 分区表，或者说 Ubuntu 为了兼容，默认假设为了 MBR 分区表

此时的分区表变化如下

![根分区后](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm7r2yrrxj30nb0ce3z4.jpg)

---

接下来分出 swap 分区，此时我们 **假设内存为 2G**

![swap 分区](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm7ryx0g0g30eg0j5dm4.jpg)

此时的分区表变化如下

![swap 分区后](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm7sodm04j30nc0cct9h.jpg)

---

由于空间不够了，所以剩下的空间我们全部分配给 /home

文件系统为 xfs

![/home 分区](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm7u64aysg30eg0j5n2u.jpg)

此时的分区表变化如下

![/home 分区后](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm7uo9gmzj30n60c1mxx.jpg)

---

可能会有您会想问：说好的 /var 目录分区呢？

此处我们用于演示的空间不够了，因此没有单独分出 /var 目录使用的分区

**_此时，/var 和 / 共享空间_**

那么，/boot 目录分区呢？由于虚拟机似乎无法模拟真实的机器环境，无法被识别为 UEFI 引导

建立的 /boot 目录分区将会认为不合法，因此，我们不建立 /boot 分区

**_让 /boot 目录也与 / 共享空间_**

---

现在，让我们按下，**右下角** 的现在安装，等待即可

阅读改动后，让我们继续

![改动](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm7vp0kzcj30j908zq4c.jpg)

接下来会让您选择时区，请选择在地图中点选您所在的地区

![选择时区](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm7xvlci9j30pc0oyn3o.jpg)

创建您的账户

![创建账户](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm7z63u1ij30op0oaq4m.jpg)

---

然后您将会进入正式的安装过程

!['安装中'](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm80oyu6pj30ll0goq8s.jpg)

请耐心等待，并且尽量 **不要跳过任何安装步骤**

![安装完成](https://ws1.sinaimg.cn/large/005TI6pRgy1fsm8dfikd2j30mi067dh0.jpg)

安装完成后会出现以下选项，请根据您的实际需求选择重启或继续试用
